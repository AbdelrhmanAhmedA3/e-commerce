import{a as q,b as J}from"./chunk-J6AFZCLN.js";import{i as K}from"./chunk-6IQFNMQV.js";import{$a as g,Bb as w,C as T,Fa as V,Gb as Q,Ha as m,I as F,Ja as U,K as $,Ka as A,La as B,Ma as f,N as v,Na as x,Oa as r,Pa as o,Qa as z,Ra as M,S as b,Sa as d,Ta as C,Ua as L,W as P,Za as c,_a as j,bb as O,cb as H,da as _,db as N,ea as h,eb as G,ka as S,o as k,qa as D,ta as p,ua as u,wb as R,xb as Y,y as I}from"./chunk-CTVYXJKM.js";var et=i=>({active:i});function nt(i,t){if(i&1){let s=M();r(0,"span",4),d("click",function(){let e=_(s).$implicit,a=C();return h(a.goToPage(e))}),c(1),o()}if(i&2){let s=t.$implicit,n=C();m("ngClass",H(2,et,s===n.currentPage)),p(),g(" ",s," ")}}function it(i,t){i&1&&(r(0,"p"),c(1,"there are no pagination"),o())}function rt(i,t){i&1&&(r(0,"span"),c(1,"..."),o())}var W=(()=>{let t=class t{constructor(){this.totalPages=1,this.currentPage=1,this.pageChange=new S}get pages(){let n=[];for(let e=1;e<=this.totalPages;e++)(e<=2||e>this.totalPages-2||Math.abs(e-this.currentPage)<=1)&&n.push(e);return n}prevPage(){this.currentPage>1&&(this.currentPage--,this.pageChange.emit(this.currentPage))}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.pageChange.emit(this.currentPage))}goToPage(n){n!==this.currentPage&&(this.currentPage=n,this.pageChange.emit(this.currentPage))}hasMorePages(){return this.currentPage<this.totalPages-2}};t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=P({type:t,selectors:[["app-pagination"]],inputs:{totalPages:"totalPages",currentPage:"currentPage"},outputs:{pageChange:"pageChange"},standalone:!0,features:[O],decls:10,vars:4,consts:[[1,"pagination-container"],[1,"pagination-button",3,"click","disabled"],[1,"pagination-numbers"],[3,"ngClass"],[3,"click","ngClass"]],template:function(e,a){e&1&&(r(0,"div",0)(1,"button",1),d("click",function(){return a.prevPage()}),c(2," < "),o(),r(3,"div",2),f(4,nt,2,4,"span",3,B,!1,it,2,0,"p"),V(7,rt,2,0,"span"),o(),r(8,"button",1),d("click",function(){return a.nextPage()}),c(9," > "),o()()),e&2&&(p(),m("disabled",a.currentPage===1),p(3),x(a.pages),p(3),U(7,a.hasMorePages()?7:-1),p(),m("disabled",a.currentPage===a.totalPages))},dependencies:[R],styles:[".input-error[_ngcontent-%COMP%]{font-size:12px;padding:0 6px;animation:_ngcontent-%COMP%_input-message .3s ease-in-out;color:red;transition:.3s}@keyframes _ngcontent-%COMP%_input-message{0%{opacity:0;transform:translateY(-6px)}to{opacity:1;transform:translateY(0)}}.pagination-container[_ngcontent-%COMP%]{margin:20px;display:flex;align-items:center;gap:0;justify-content:center}.pagination-button[_ngcontent-%COMP%]{background-color:transparent;border:none;cursor:pointer;font-size:16px}.pagination-numbers[_ngcontent-%COMP%]{display:flex;align-items:center;margin:0 8px}.pagination-numbers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;padding:8px 12px;cursor:pointer;border-radius:4px;margin:0 4px;background-color:#f3f3f3;transition:background-color .3s}.pagination-numbers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.pagination-numbers[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background-color:#00bcd4;color:#fff}.pagination-ellipsis[_ngcontent-%COMP%]{padding:8px 12px}"]});let i=t;return i})();var X=(()=>{let t=class t{constructor(n){this.http=n,this.apiUrl="https://dummyjson.com/products/category-list"}getCategories(){return this.http.get(this.apiUrl)}};t.\u0275fac=function(e){return new(e||t)(b(w))},t.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();function ct(i,t){if(i&1){let s=M();r(0,"div")(1,"input",3),d("input",function(){let e=_(s).$implicit,a=C();return h(a.onCategoryChange.emit(e))}),o(),r(2,"label",4),c(3),o()()}if(i&2){let s=t.$implicit;p(),m("id",s)("value",s),p(),m("for",s),p(),g(" ",s," ")}}var Z=(()=>{let t=class t{constructor(n){this.categoryService=n,this.categories=[],this.onCategoryChange=new S}ngOnInit(){this.categoryService.getCategories().subscribe(n=>{this.categories=n})}};t.\u0275fac=function(e){return new(e||t)(u(X))},t.\u0275cmp=P({type:t,selectors:[["app-category-filter"]],outputs:{onCategoryChange:"onCategoryChange"},standalone:!0,features:[O],decls:7,vars:0,consts:[[1,"filter"],["id","all","checked","","type","radio","value","All","name","one",3,"input"],["for","all",1,"title"],["type","radio","name","one",3,"input","id","value"],[1,"title",3,"for"]],template:function(e,a){e&1&&(r(0,"div",0)(1,"div")(2,"input",1),d("input",function(){return a.onCategoryChange.emit("all")}),o(),r(3,"label",2),c(4," All "),o()(),f(5,ct,4,4,"div",null,A),o()),e&2&&(p(5),x(a.categories))},dependencies:[K],styles:[".filter[_ngcontent-%COMP%]{display:grid;width:310px;padding:10px;border-radius:8px;border:.5px solid rgb(66,66,66)}.filter[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-top:10px}"]});let i=t;return i})();var tt=(()=>{let t=class t{constructor(n){this.http=n,this.baseUrl="https://dummyjson.com/products"}fetchProducts(n,e,a){return this.http.get(`${this.baseUrl}/search?q=${a}&skip=${n}&limit=${e}`)}fetchProductByCategory(n,e,a){return this.http.get(`${this.baseUrl}/category/${a}?skip=${n}&limit=${e}`)}};t.\u0275fac=function(e){return new(e||t)(b(w))},t.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var pt=(i,t)=>t.id;function lt(i,t){if(i&1){let s=M();r(0,"article",4)(1,"div",6),c(2),o(),r(3,"div",7),z(4,"img",8),o(),r(5,"div",9)(6,"h4",10)(7,"b"),c(8),o()(),r(9,"p"),c(10),o(),r(11,"p",11)(12,"span",12)(13,"span",13),c(14),o(),c(15," USD"),o(),r(16,"span")(17,"span",13),c(18," 477.85 "),o(),c(19," USD"),o()(),r(20,"p"),c(21,"Brand: "),r(22,"span",13),c(23),o()(),r(24,"p"),c(25,"Category: "),r(26,"span",13),c(27),o()(),r(28,"p"),c(29,"In stock: "),r(30,"span",13),c(31),o()(),r(32,"span",14),c(33),r(34,"span",15),c(35),o()(),r(36,"button",16),d("click",function(){_(s);let e=C();return h(e.addToCart.increment())}),c(37,"ADD TO CART"),o()()()}if(i&2){let s=t.$implicit;p(2),g(" ","-"+s.discountPercentage+"%"," "),p(2),L("src",s.images,D),p(4),g(" ",s.title," "),p(2),g("",s.description,"."),p(4),j(s.price),p(9),j(s.brand),p(4),g(" ",s.category," "),p(4),g(" ",s.stock," "),p(2),g("","\u2B50"+s.rating," "),p(2),g("(",s.minimumOrderQuantity,")")}}function gt(i,t){i&1&&(r(0,"p"),c(1,"No products found."),o())}var $t=(()=>{let t=class t{constructor(n,e,a,l){this.productService=n,this.searchS=e,this.addToCart=a,this.loadingSpiner=l,this.totalPages=0,this.currentPage=1,this.limit=10}ngOnInit(){this.fetchProducts(this.currentPage)}fetchProducts(n){let e=(n-1)*this.limit;this.loadingSpiner.start(),this.products$=this.searchS.searchTerm$.pipe(I(600),F(a=>this.productService.fetchProducts(e,this.limit,a).pipe($(l=>this.totalPages=Math.ceil(l.total/this.limit)),k(l=>l.products),T(()=>this.loadingSpiner.stop()))))}onGetCategory(n){let e=(this.currentPage-1)*this.limit;if(n=="all"){this.fetchProducts(this.currentPage);return}this.loadingSpiner.start(),this.products$=this.searchS.searchTerm$.pipe(I(600),F(a=>this.productService.fetchProductByCategory(e,this.limit,n).pipe($(l=>this.totalPages=Math.ceil(l.total/this.limit)),k(l=>a?l.products.filter(y=>y.title.toLowerCase().includes(a.toLowerCase())):l.products),T(()=>this.loadingSpiner.stop()))))}onPageChange(n){this.currentPage=n,this.fetchProducts(n)}};t.\u0275fac=function(e){return new(e||t)(u(tt),u(q),u(J),u(Q))},t.\u0275cmp=P({type:t,selectors:[["app-products"]],standalone:!0,features:[O],decls:13,vars:5,consts:[[1,"container"],[1,"layout"],[3,"onCategoryChange"],[1,"container-card"],[1,"card"],[3,"pageChange","totalPages","currentPage"],[1,"discount"],[1,"img-card"],["alt","Avatar",3,"src"],[1,"container-title"],[1,"title"],[1,"price-card"],[1,"line-through"],[1,"fw"],[1,"star-icon"],[1,"rate"],[1,"btn-card",3,"click"]],template:function(e,a){e&1&&(r(0,"section",0)(1,"h1"),c(2,"iPhone"),o(),r(3,"p"),c(4,"Home / Products "),o(),r(5,"section",1)(6,"app-category-filter",2),d("onCategoryChange",function(y){return a.onGetCategory(y)}),o(),r(7,"div",3),f(8,lt,38,10,"article",4,pt,!1,gt,2,0,"p"),N(11,"async"),o()(),r(12,"app-pagination",5),d("pageChange",function(y){return a.onPageChange(y)}),o()()),e&2&&(p(8),x(G(11,3,a.products$)),p(4),m("totalPages",a.totalPages)("currentPage",a.currentPage))},dependencies:[Y,W,Z],styles:[".container[_ngcontent-%COMP%]{padding:48px 60px}.container[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]{display:flex;gap:24px}.container[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:24px}.container[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{position:relative;border:1px solid rgb(66,66,66);box-shadow:0 4px 8px #0003;transition:.3s;overflow:hidden;border-radius:5px}.container[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 16px #0003}.container[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .discount[_ngcontent-%COMP%]{background:#41cccc;color:#344054;position:absolute;left:21px;top:16px;width:71px;height:23px;padding:3px;font-weight:700;display:flex;justify-content:center;align-items:center;border-radius:4px}.container[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .img-card[_ngcontent-%COMP%]{height:250px;overflow:hidden}.container[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .img-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:5px 5px 0 0;height:100%;width:100%}.container[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .container-title[_ngcontent-%COMP%]{padding:0 15px}.container[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .container-title[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-top:10px;font-weight:700}.container[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .container-title[_ngcontent-%COMP%]   .price-card[_ngcontent-%COMP%]{display:flex;gap:15px}.container[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .container-title[_ngcontent-%COMP%]   .price-card[_ngcontent-%COMP%]   .line-through[_ngcontent-%COMP%]{text-decoration:line-through}.container[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .container-title[_ngcontent-%COMP%]   .star-icon[_ngcontent-%COMP%]{display:flex;justify-content:end;gap:5px;color:#f4b000}.container[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .container-title[_ngcontent-%COMP%]   .star-icon[_ngcontent-%COMP%]   .rate[_ngcontent-%COMP%]{color:#1e1e1e}.container[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .container-title[_ngcontent-%COMP%]   .fw[_ngcontent-%COMP%]{font-weight:700}.container[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .btn-card[_ngcontent-%COMP%]{background:#41cccc;padding:15px 10px;width:100%;outline:none;border:none;margin:10px 0;border-radius:4px;font-weight:700;cursor:pointer}@media screen and (max-width: 711px){.layout[_ngcontent-%COMP%]{flex-wrap:wrap}}"]});let i=t;return i})();export{$t as ProductsComponent};
