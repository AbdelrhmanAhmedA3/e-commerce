import './polyfills.server.mjs';
import{a as q,b as J}from"./chunk-B5QCGC4N.mjs";import{i as K}from"./chunk-2YFNFPTU.mjs";import{b as Q}from"./chunk-MOSTUY5M.mjs";import{A as $,G as j,I as D,Ja as w,Kb as R,L as b,La as m,Lb as Y,Na as v,Oa as A,Pa as B,Q as S,Qa as f,Ra as x,Sa as o,Sb as T,Ta as r,Ua as z,V as _,Va as M,Wa as d,Xa as u,Ya as L,bb as c,ca as P,cb as V,da as h,db as g,fb as O,gb as H,hb as N,ib as G,ja as E,m as I,ta as U,w as F,wa as p,xa as C}from"./chunk-SBNCQXMG.mjs";import"./chunk-VVCT4QZE.mjs";var et=e=>({active:e});function nt(e,t){if(e&1){let s=M();o(0,"span",4),d("click",function(){let i=P(s).$implicit,a=u();return h(a.goToPage(i))}),c(1),r()}if(e&2){let s=t.$implicit,n=u();m("ngClass",H(2,et,s===n.currentPage)),p(),g(" ",s," ")}}function it(e,t){e&1&&(o(0,"p"),c(1,"there are no pagination"),r())}function ot(e,t){e&1&&(o(0,"span"),c(1,"..."),r())}var W=(()=>{let t=class t{constructor(){this.totalPages=1,this.currentPage=1,this.pageChange=new E}get pages(){let n=[];for(let i=1;i<=this.totalPages;i++)(i<=2||i>this.totalPages-2||Math.abs(i-this.currentPage)<=1)&&n.push(i);return n}prevPage(){this.currentPage>1&&(this.currentPage--,this.pageChange.emit(this.currentPage))}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.pageChange.emit(this.currentPage))}goToPage(n){n!==this.currentPage&&(this.currentPage=n,this.pageChange.emit(this.currentPage))}hasMorePages(){return this.currentPage<this.totalPages-2}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=_({type:t,selectors:[["app-pagination"]],inputs:{totalPages:"totalPages",currentPage:"currentPage"},outputs:{pageChange:"pageChange"},standalone:!0,features:[O],decls:10,vars:4,consts:[[1,"pagination-container"],[1,"pagination-button",3,"click","disabled"],[1,"pagination-numbers"],[3,"ngClass"],[3,"click","ngClass"]],template:function(i,a){i&1&&(o(0,"div",0)(1,"button",1),d("click",function(){return a.prevPage()}),c(2," < "),r(),o(3,"div",2),f(4,nt,2,4,"span",3,B,!1,it,2,0,"p"),w(7,ot,2,0,"span"),r(),o(8,"button",1),d("click",function(){return a.nextPage()}),c(9," > "),r()()),i&2&&(p(),m("disabled",a.currentPage===1),p(3),x(a.pages),p(3),v(7,a.hasMorePages()?7:-1),p(),m("disabled",a.currentPage===a.totalPages))},dependencies:[R],styles:[".input-error[_ngcontent-%COMP%]{font-size:12px;padding:0 6px;animation:_ngcontent-%COMP%_input-message .3s ease-in-out;color:red;transition:.3s}@keyframes _ngcontent-%COMP%_input-message{0%{opacity:0;transform:translateY(-6px)}to{opacity:1;transform:translateY(0)}}.pagination-container[_ngcontent-%COMP%]{margin:20px;display:flex;align-items:center;gap:0;justify-content:center}.pagination-button[_ngcontent-%COMP%]{background-color:transparent;border:none;cursor:pointer;font-size:16px}.pagination-numbers[_ngcontent-%COMP%]{display:flex;align-items:center;margin:0 8px}.pagination-numbers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;padding:8px 12px;cursor:pointer;border-radius:4px;margin:0 4px;background-color:#f3f3f3;transition:background-color .3s}.pagination-numbers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.pagination-numbers[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background-color:#00bcd4;color:#fff}.pagination-ellipsis[_ngcontent-%COMP%]{padding:8px 12px}"]});let e=t;return e})();var X=(()=>{let t=class t{constructor(n){this.http=n,this.apiUrl="https://dummyjson.com/products/category-list"}getCategories(){return this.http.get(this.apiUrl)}};t.\u0275fac=function(i){return new(i||t)(S(T))},t.\u0275prov=b({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function ct(e,t){if(e&1){let s=M();o(0,"div")(1,"input",3),d("input",function(){let i=P(s).$implicit,a=u();return h(a.onCategoryChange.emit(i))}),r(),o(2,"label",4),c(3),r()()}if(e&2){let s=t.$implicit;p(),m("id",s)("value",s),p(),m("for",s),p(),g(" ",s," ")}}var Z=(()=>{let t=class t{constructor(n){this.categoryService=n,this.categories=[],this.onCategoryChange=new E}ngOnInit(){this.categoryService.getCategories().subscribe(n=>{this.categories=n})}};t.\u0275fac=function(i){return new(i||t)(C(X))},t.\u0275cmp=_({type:t,selectors:[["app-category-filter"]],outputs:{onCategoryChange:"onCategoryChange"},standalone:!0,features:[O],decls:7,vars:0,consts:[[1,"filter"],["id","all","checked","","type","radio","value","All","name","one",3,"input"],["for","all",1,"title"],["type","radio","name","one",3,"input","id","value"],[1,"title",3,"for"]],template:function(i,a){i&1&&(o(0,"div",0)(1,"div")(2,"input",1),d("input",function(){return a.onCategoryChange.emit("all")}),r(),o(3,"label",2),c(4," All "),r()(),f(5,ct,4,4,"div",null,A),r()),i&2&&(p(5),x(a.categories))},dependencies:[K],styles:[".filter[_ngcontent-%COMP%]{display:grid;width:310px;padding:10px;border-radius:8px;border:.5px solid rgb(66,66,66)}.filter[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-top:10px}"]});let e=t;return e})();var tt=(()=>{let t=class t{constructor(n){this.http=n,this.baseUrl="https://dummyjson.com/products"}fetchProducts(n,i,a){return this.http.get(`${this.baseUrl}/search?q=${a}&skip=${n}&limit=${i}`)}fetchProductByCategory(n,i,a){return this.http.get(`${this.baseUrl}/category/${a}?skip=${n}&limit=${i}`)}};t.\u0275fac=function(i){return new(i||t)(S(T))},t.\u0275prov=b({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var pt=(e,t)=>t.id;function lt(e,t){if(e&1&&c(0),e&2){let s=u();g(" ","/ "+s.category," ")}}function gt(e,t){if(e&1&&(c(0," / "),o(1,"strong"),c(2),r()),e&2){let s=u();p(2),g(" ",s.searchTerm," ")}}function dt(e,t){if(e&1){let s=M();o(0,"article",4)(1,"div",6),c(2),r(),o(3,"div",7),z(4,"img",8),r(),o(5,"div",9)(6,"h4",10)(7,"b"),c(8),r()(),o(9,"p"),c(10),r(),o(11,"p",11)(12,"span",12)(13,"span",13),c(14),r(),c(15," USD"),r(),o(16,"span")(17,"span",13),c(18," 477.85 "),r(),c(19," USD"),r()(),o(20,"p"),c(21,"Brand: "),o(22,"span",13),c(23),r()(),o(24,"p"),c(25,"Category: "),o(26,"span",13),c(27),r()(),o(28,"p"),c(29,"In stock: "),o(30,"span",13),c(31),r()(),o(32,"span",14),c(33),o(34,"span",15),c(35),r()(),o(36,"button",16),d("click",function(){P(s);let i=u();return h(i.addToCart.increment())}),c(37,"ADD TO CART"),r()()()}if(e&2){let s=t.$implicit;p(2),g(" ","-"+s.discountPercentage+"%"," "),p(2),L("src",s.images,U),p(4),g(" ",s.title," "),p(2),g("",s.description,"."),p(4),V(s.price),p(9),V(s.brand),p(4),g(" ",s.category," "),p(4),g(" ",s.stock," "),p(2),g("","\u2B50"+s.rating," "),p(2),g("(",s.minimumOrderQuantity,")")}}function mt(e,t){e&1&&(o(0,"p"),c(1,"No products found."),r())}var Dt=(()=>{let t=class t{constructor(n,i,a,l){this.productService=n,this.search=i,this.addToCart=a,this.loadingSpiner=l,this.searchTerm="",this.totalPages=0,this.currentPage=1,this.limit=10}ngOnInit(){this.fetchProducts(this.currentPage),this.search.searchTerm$.subscribe(n=>{this.searchTerm=n})}fetchProducts(n){let i=(n-1)*this.limit;this.loadingSpiner.start(),this.products$=this.search.searchTerm$.pipe(F(600),j(a=>this.productService.fetchProducts(i,this.limit,a).pipe(D(l=>this.totalPages=Math.ceil(l.total/this.limit)),I(l=>l.products),$(()=>this.loadingSpiner.stop()))))}onGetCategory(n){this.category=n;let i=(this.currentPage-1)*this.limit;if(n=="all"){this.fetchProducts(this.currentPage);return}this.loadingSpiner.start(),this.products$=this.search.searchTerm$.pipe(F(600),j(a=>this.productService.fetchProductByCategory(i,this.limit,n).pipe(D(l=>this.totalPages=Math.ceil(l.total/this.limit)),I(l=>a?l.products.filter(y=>y.title.toLowerCase().includes(a.toLowerCase())):l.products),$(()=>this.loadingSpiner.stop()))))}onPageChange(n){this.currentPage=n,this.fetchProducts(n)}};t.\u0275fac=function(i){return new(i||t)(C(tt),C(q),C(J),C(Q))},t.\u0275cmp=_({type:t,selectors:[["app-products"]],standalone:!0,features:[O],decls:15,vars:7,consts:[[1,"container"],[1,"layout"],[3,"onCategoryChange"],[1,"container-card"],[1,"card"],[3,"pageChange","totalPages","currentPage"],[1,"discount"],[1,"img-card"],["alt","Avatar",3,"src"],[1,"container-title"],[1,"title"],[1,"price-card"],[1,"line-through"],[1,"fw"],[1,"star-icon"],[1,"rate"],[1,"btn-card",3,"click"]],template:function(i,a){i&1&&(o(0,"section",0)(1,"h1"),c(2,"iPhone"),r(),o(3,"p"),c(4,"Home / Products "),w(5,lt,1,1)(6,gt,3,1,"strong"),r(),o(7,"section",1)(8,"app-category-filter",2),d("onCategoryChange",function(y){return a.onGetCategory(y)}),r(),o(9,"div",3),f(10,dt,38,10,"article",4,pt,!1,mt,2,0,"p"),N(13,"async"),r()(),o(14,"app-pagination",5),d("pageChange",function(y){return a.onPageChange(y)}),r()()),i&2&&(p(5),v(5,a.category?5:-1),p(),v(6,a.searchTerm!=""?6:-1),p(4),x(G(13,5,a.products$)),p(4),m("totalPages",a.totalPages)("currentPage",a.currentPage))},dependencies:[Y,W,Z],styles:[".container[_ngcontent-%COMP%]{padding:48px 60px}.container[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]{display:flex;gap:24px}.container[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:24px}.container[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{position:relative;border:1px solid rgb(66,66,66);box-shadow:0 4px 8px #0003;transition:.3s;overflow:hidden;border-radius:5px}.container[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 16px #0003}.container[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .discount[_ngcontent-%COMP%]{background:#41cccc;color:#344054;position:absolute;left:21px;top:16px;width:71px;height:23px;padding:3px;font-weight:700;display:flex;justify-content:center;align-items:center;border-radius:4px}.container[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .img-card[_ngcontent-%COMP%]{height:250px;overflow:hidden}.container[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .img-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:5px 5px 0 0;height:100%;width:100%}.container[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .container-title[_ngcontent-%COMP%]{padding:0 15px}.container[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .container-title[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-top:10px;font-weight:700}.container[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .container-title[_ngcontent-%COMP%]   .price-card[_ngcontent-%COMP%]{display:flex;gap:15px}.container[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .container-title[_ngcontent-%COMP%]   .price-card[_ngcontent-%COMP%]   .line-through[_ngcontent-%COMP%]{text-decoration:line-through}.container[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .container-title[_ngcontent-%COMP%]   .star-icon[_ngcontent-%COMP%]{display:flex;justify-content:end;gap:5px;color:#f4b000}.container[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .container-title[_ngcontent-%COMP%]   .star-icon[_ngcontent-%COMP%]   .rate[_ngcontent-%COMP%]{color:#1e1e1e}.container[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .container-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .container-title[_ngcontent-%COMP%]   .fw[_ngcontent-%COMP%]{font-weight:700}.container[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .btn-card[_ngcontent-%COMP%]{color:#000;background:#41cccc;padding:15px 10px;width:100%;outline:none;border:none;margin:10px 0;border-radius:4px;font-weight:700;cursor:pointer}@media screen and (max-width: 714.9px){.layout[_ngcontent-%COMP%]{flex-wrap:wrap}}"]});let e=t;return e})();export{Dt as ProductsComponent};
